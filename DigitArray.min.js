function checkBase(t){if("number"!=typeof t||t!==Math.floor(t))throw"Expected the base to be an integer, but got ("+t+").";if(MIN_BASE>t)throw"Expected a base greater than "+MIN_BASE+", but got ("+t+").";if(t>MAX_BASE)throw"Expected a base less than "+MAX_BASE+", but got ("+t+")."}function checkAlphabet(t,i){if(i.length<t)throw"Alphabet must contain at least "+t+" numerals."}function divide(t,i){var e=Math.floor(t/i),r=t-e*i;return{quotient:e,remainder:r}}var DigitArray=function(t,i,e){checkBase(t),this.base=t,e=e||Endianess.big,"number"==typeof i?(this.digits=[i],this.normalize()):(this.digits=i||[0],e===Endianess.big&&this.digits.reverse())};DigitArray.prototype.add=function(t){return this.digits[0]+=t,this.normalize()},DigitArray.prototype.multiply=function(t){return this.digits=this.digits.map(function(i){return t*i}),this.normalize()},DigitArray.prototype.normalize=function(){for(var t=0,i=0;t>0||i<this.digits.length;i++){var e=divide((this.digits[i]||0)+t,this.base);this.digits[i]=e.remainder,t=e.quotient}return this},DigitArray.prototype.toBase=function(t){checkBase(t);for(var i=new DigitArray(t),e=this.digits.length-1;e>=0;e--)i.multiply(this.base).add(this.digits[e]);return i},DigitArray.prototype.encode=function(t,i){checkAlphabet(this.base,t);var e=this.digits.map(function(i){return t[i]});return i=i||Endianess.big,i===Endianess.big&&e.reverse(),e.join("")},DigitArray.decode=function(t,i,e,r){checkAlphabet(i,e);var n={};e.split("").forEach(function(t,i){n[t]=i});var s=t.split("").map(function(t){return n[t]});return r=r||Endianess.big,r===Endianess.little&&s.reverse(),new DigitArray(i,s)},DigitArray.prototype.toNumber=function(){for(var t=0,i=this.digits.length-1;i>=0;i--)t=t*this.base+this.digits[i];return t};var MAX_INT=Math.pow(2,53)-1,MIN_BASE=2,MAX_BASE=Math.floor(Math.sqrt(MAX_INT)),Endianess={big:"big",little:"little"};